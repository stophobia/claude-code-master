import { Callout } from 'nextra/components'

# ê³µí†µ íŒ¨í„´

ìì£¼ ì‚¬ìš©ë˜ëŠ” ì½”ë“œ íŒ¨í„´ì…ë‹ˆë‹¤.

## API ì‘ë‹µ í˜•ì‹

```typescript
interface ApiResponse<T> {
  success: boolean
  data?: T
  error?: string
  meta?: {
    total: number
    page: number
    limit: number
  }
}
```

### ì‚¬ìš© ì˜ˆì‹œ

```typescript
// ì„±ê³µ ì‘ë‹µ
return {
  success: true,
  data: users,
  meta: { total: 100, page: 1, limit: 10 }
}

// ì˜¤ë¥˜ ì‘ë‹µ
return {
  success: false,
  error: 'ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'
}
```

## ì»¤ìŠ¤í…€ í›… íŒ¨í„´

### useDebounce

```typescript
export function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value)

  useEffect(() => {
    const handler = setTimeout(() => setDebouncedValue(value), delay)
    return () => clearTimeout(handler)
  }, [value, delay])

  return debouncedValue
}
```

### useFetch

```typescript
export function useFetch<T>(url: string) {
  const [data, setData] = useState<T | null>(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<Error | null>(null)

  useEffect(() => {
    fetch(url)
      .then(res => res.json())
      .then(setData)
      .catch(setError)
      .finally(() => setLoading(false))
  }, [url])

  return { data, loading, error }
}
```

## ë ˆí¬ì§€í† ë¦¬ íŒ¨í„´

```typescript
interface Repository<T> {
  findAll(filters?: Filters): Promise<T[]>
  findById(id: string): Promise<T | null>
  create(data: CreateDto): Promise<T>
  update(id: string, data: UpdateDto): Promise<T>
  delete(id: string): Promise<void>
}

// êµ¬í˜„ ì˜ˆì‹œ
class UserRepository implements Repository<User> {
  async findAll(filters?: UserFilters): Promise<User[]> {
    const { data } = await supabase
      .from('users')
      .select('*')
      .match(filters || {})
    return data || []
  }

  async findById(id: string): Promise<User | null> {
    const { data } = await supabase
      .from('users')
      .select('*')
      .eq('id', id)
      .single()
    return data
  }

  // ... ë‚˜ë¨¸ì§€ ë©”ì„œë“œ
}
```

## ì„œë¹„ìŠ¤ ë ˆì´ì–´ íŒ¨í„´

```typescript
class UserService {
  constructor(private readonly repo: UserRepository) {}

  async createUser(input: CreateUserInput): Promise<User> {
    // 1. ê²€ì¦
    const validated = userSchema.parse(input)

    // 2. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    const hashedPassword = await hash(validated.password)

    // 3. ì €ì¥
    return this.repo.create({
      ...validated,
      password: hashedPassword
    })
  }
}
```

## ì—ëŸ¬ í•¸ë“¤ë§ íŒ¨í„´

```typescript
class AppError extends Error {
  constructor(
    public message: string,
    public statusCode: number = 500,
    public code?: string
  ) {
    super(message)
  }
}

// ì‚¬ìš©
throw new AppError('ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 404, 'USER_NOT_FOUND')
```

## ìŠ¤ì¼ˆë ˆí†¤ í”„ë¡œì íŠ¸

<Callout type="info" emoji="ğŸ“">
  ìƒˆë¡œìš´ ê¸°ëŠ¥ êµ¬í˜„ ì‹œ ê²€ì¦ëœ ìŠ¤ì¼ˆë ˆí†¤ í”„ë¡œì íŠ¸ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
</Callout>

1. ê²€ì¦ëœ ìŠ¤ì¼ˆë ˆí†¤ í”„ë¡œì íŠ¸ ê²€ìƒ‰
2. ë³‘ë ¬ ì—ì´ì „íŠ¸ë¡œ ì˜µì…˜ í‰ê°€:
   - ë³´ì•ˆ í‰ê°€
   - í™•ì¥ì„± ë¶„ì„
   - ê´€ë ¨ì„± ì ìˆ˜
   - êµ¬í˜„ ê³„íš
3. ìµœì ì˜ ë§¤ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í´ë¡ 
4. ê²€ì¦ëœ êµ¬ì¡° ë‚´ì—ì„œ ë°˜ë³µ ê°œë°œ
