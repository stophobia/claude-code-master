import { Callout } from 'nextra/components'
import { DownloadMarkdown } from '../../components/DownloadMarkdown'
import { ruleContents } from '../../components/ruleContents'

# Git 워크플로우

<DownloadMarkdown
  filename="git-workflow.md"
  content={ruleContents['git-workflow']}
  folderPath="~/.claude/rules/"
/>

Git 커밋 및 PR 프로세스 규칙입니다.

## 커밋 메시지 형식

```
<타입>: <설명>

<선택적 본문>
```

### 타입

| 타입 | 설명 | 예시 |
|------|------|------|
| `feat` | 새 기능 | `feat: 사용자 인증 추가` |
| `fix` | 버그 수정 | `fix: 로그인 오류 해결` |
| `refactor` | 리팩토링 | `refactor: API 클라이언트 구조 개선` |
| `docs` | 문서 | `docs: README 업데이트` |
| `test` | 테스트 | `test: 유틸리티 함수 테스트 추가` |
| `chore` | 유지보수 | `chore: 의존성 업데이트` |
| `perf` | 성능 | `perf: 쿼리 최적화` |
| `ci` | CI/CD | `ci: GitHub Actions 설정` |

## Pull Request 워크플로우

PR 생성 시:

1. **전체 커밋 히스토리 분석** (최신 커밋만이 아님)
2. `git diff [base-branch]...HEAD`로 **모든 변경사항 확인**
3. **포괄적인 PR 요약 작성**
4. **TODO가 포함된 테스트 계획** 포함
5. 새 브랜치인 경우 `-u` 플래그로 푸시

### PR 템플릿

```markdown
## 요약
- 변경 사항 1
- 변경 사항 2

## 테스트 계획
- [ ] 단위 테스트 통과
- [ ] 통합 테스트 통과
- [ ] 수동 테스트 완료
```

## 기능 구현 워크플로우

<Callout type="info" emoji="📋">
  새 기능 구현 시 다음 순서를 따르세요.
</Callout>

### 1. 먼저 계획

- **planner** 에이전트로 구현 계획 생성
- 의존성과 위험 식별
- 단계별로 분해

### 2. TDD 접근법

- **tdd-guide** 에이전트 사용
- 테스트 먼저 작성 (RED)
- 테스트 통과하도록 구현 (GREEN)
- 리팩토링 (IMPROVE)
- 80%+ 커버리지 확인

### 3. 코드 리뷰

- 코드 작성 직후 **code-reviewer** 에이전트 사용
- CRITICAL과 HIGH 이슈 해결
- 가능하면 MEDIUM 이슈도 수정

### 4. 커밋 & 푸시

- 상세한 커밋 메시지
- 컨벤셔널 커밋 형식 준수

## 브랜치 전략

```
main
├── feature/user-auth
├── feature/payment
├── fix/login-bug
└── refactor/api-client
```

### 브랜치 명명 규칙

- `feature/` - 새 기능
- `fix/` - 버그 수정
- `refactor/` - 리팩토링
- `docs/` - 문서
- `test/` - 테스트

## 머지 전 체크리스트

- [ ] 모든 테스트 통과
- [ ] 코드 리뷰 완료
- [ ] 보안 검사 통과
- [ ] 문서 업데이트 (필요시)
